syntax = "proto3";
package users;

service UserService {
    rpc HealthCheck(Empty) returns (HealthCheckResponse);
    rpc CreateUser(UserRequest) returns (Response);
    rpc CheckUserExists(CheckUserRequest) returns (Response);
    rpc VerifyUser(VerifyUserRequest) returns (Response);
    rpc SendTokenVerification(SendTokenRequest) returns (Response);
    rpc Login(LoginRequest) returns (UserResponse);
    rpc GetUser(GetRequest) returns (UserResponse);
    rpc GetUsers(GetRequest) returns (UserResponse);
    rpc UserOAuthProvider(CustomerOAuthProviderRequest) returns (UserResponse);
    rpc ChangePassword(ChangePasswordRequest) returns (Response);
    rpc UpdateSettings(UpdateSettingsRequest) returns (Response);
    rpc SaveBankAccount(SaveBankAccountRequest) returns (Response);
    rpc GetBankAccounts(GetRequest) returns (ListResponse);
    rpc GetBankAccount(GetRequest) returns (Response);
    rpc ResetPasswordVerification(ResetPasswordRequest) returns (Response);
    rpc DeleteUser(IdRequest) returns (Response);
    rpc ApproveUser(IdRequest) returns (Response);
    rpc RejectUser(IdRequest) returns (Response);
    rpc ActivateUser(IdRequest) returns (Response);
    rpc DeactivateUser(IdRequest) returns (Response);
    //Customers
    rpc SaveCustomer(SaveCustomerRequest) returns (UserResponse);

    //Businesses
    rpc SaveSeller(SaveSellerRequest) returns (UserResponse);

    //Franchise
    rpc SaveFranchise(SaveFranchiseRequest) returns (Response);
    //Personnel
    rpc SavePersonnel(Empty) returns (Response);

    //Riders
    rpc SaveRider(SaveRiderRequest) returns (UserResponse);

    rpc SaveCategory(SaveCategoryRequest) returns (Response);
    rpc GetCategory(GetRequest) returns (Response);
    rpc GetCategories(GetRequest) returns (ListResponse);
    rpc DeleteCategory(GetRequest) returns (Response);
    
}

message SaveFranchiseRequest {
    string seller_id = 5;
    string email = 6;
    string password = 7;
    optional string latitude = 8;
    optional string longitude = 9;
    optional string formatted_address = 4;
    string franchise_name = 10;
    string franchise_phone_number = 11;
    string opening_hours = 12;
    string closing_hours = 13;
    optional string individual_first_name = 17;
    optional string individual_other_name = 18;
    optional string individual_last_name = 19;
    string banner = 20;
    optional bool seller_allow_withdraw = 22;
}

message IdRequest {
    string id = 1;
    optional string user_id = 2;
    map<string,string> metadata = 3;
}
message GetListRequest {
    string query = 1;
    map<string, string > filters = 2;
    int32 page = 3;
    int32 size = 4;
    optional string user_id = 5;
}

message SaveCategoryRequest {
    optional string id = 1;
    string user_id = 2;
    string name = 3;
    map<string, string> metadata = 4;
}
enum OTPType {
    RESET_PASSWORD = 1;
    CONFIRM_NEW_DEVICE = 2;
    EMAIL_VERIFICATION = 3;
    TRANSACTION_PIN = 4;
    PHONE_VERIFICATION = 7; // use for just verifying phone number
    EMAIL_CONFIRMATION =6;
}

message ResetPasswordRequest {
    string user = 1;
    string otp = 2;
    string password = 3;
}
//User Requests
message CustomerOAuthProviderRequest {
    string provider = 1;
    string token = 2;
    string device_token = 3;
    string medium = 4;
    float latitude = 5;
    float longitude = 6;
    map<string, string> address = 7;
}
message CheckUserRequest {
    string with = 1;
    string user = 2;
    UserType user_type = 3;
}
message SendTokenRequest {
    optional string id = 1;
    string with = 2; // 'email' or 'phone'
    string user = 3; // email address or phone number
    UserType user_type = 4;
    OTPType type = 5;
}
message VerifyUserRequest {
    string with = 1; // 'email' or 'phone'
    string user = 2; // email address or phone number
    string token = 3;
}

message UpdateSettingsRequest {
    string user_id = 1;
    map<string, string> settings = 2;
}
message ChangePasswordRequest {
    string user_id = 1;
    string old_password = 2;
    string new_password = 3;
    optional string email = 4;
}
message SaveBankAccountRequest {
    string user_id = 1;
    string account_name = 2;
    string account_number = 3;
    string bank_name = 4;
    string bank_code = 5;
    bool is_main = 6;
    optional bool status = 7;
    optional string id = 8;
}
message UserResponse {
    int32 status = 1;
    bool success = 2;
    string message = 3;
    optional string error = 4;
    message Data {
        User user = 1;
        optional Customer customer = 2;
        Wallet wallet = 3;
        map<string, string > settings = 4;
        optional Rider rider = 5;
        optional Seller seller = 6;
        optional Personnel personnel = 7;
    }
    Data data = 5;
}
//
message Empty {}


message HealthCheckResponse {
    enum ServingStatus {
        UNKNOWN = 0;
        SERVING = 1;
        NOT_SERVING = 2;
        SERVICE_UNKNOWN = 3;  // Used only by the Watch method.
    }
    ServingStatus status = 1;
}
//Data
message BankAccount {
    string user_id = 1;
    string account_name = 2;
    string account_numner = 3;
    bool is_main = 4;
    string bank_name = 5;
    string bank_code = 6;
    bool status = 7;
}
message User {
    string id = 1;
    string username = 2;
    string email = 3;
    string phone = 4;
    string latitude = 5;
    string longitude = 6;
    string device_version = 7;
    string compliance_status = 8;
    string created_at = 9;
    string updated_at = 10;
}

message Customer {
    string id = 1;
    string firstname = 2;
    string lastname = 3;
    map<string, string> phones = 4;
    string referral_code = 5;
    string avatar = 6;
}

message Wallet {
    string id = 1;
    string accountName = 2;
    string accountNumber =3;
    double balance = 4;
}
// Response

message Response {
    int32 status = 1;
    bool success = 2;
    string message = 3;
    map<string,string > data = 4;
    optional string error = 5;
}
message ListResponse {
    int32 status = 1;
    bool success = 2;
    string message = 3;
    optional string error = 4;
    repeated List data = 5;
    message List {
        map<string,string> data = 1;
    }
}
//Requests
message UserRequest {
    string name = 1;
    string email = 2;
    string password = 3;
    string phone = 4;
}
//Customer
message SaveCustomerRequest {
    optional string id = 1;
    string email = 2;
    string password = 3;
    string phone = 4;
    string firstname = 5;
    string lastname = 6;
    map<string,string> address = 7;
    string deviceToken = 8;
    string deviceVersion = 9;
    string referral = 10;
}

message SaveRiderRequest {
    optional string id = 1;
    optional string email = 2;
    string phone = 3;
    string password = 6;
    string first_name = 7;
    string last_name = 8;
    string latitude = 9;
    string longitude = 10;
    int32 contract_type = 11;
    repeated int32 shift_data = 12;
    optional string next_of_kin = 13;
    optional string next_of_kin_phone_number = 14;
    bytes drivers_license = 15;
    optional string drivers_license_base64 = 16;
    optional int32 vehicle_type = 17;
    optional string vehicle_brand = 18;
    optional string vehicle_plate_number = 19;
    bytes vehicle_picture = 20;
    optional string vehicle_picture_base64 = 21;
    optional string first_guarantor_name = 22;
    optional string first_guarantor_phone_number = 23;
    optional string second_guarantor_name = 24;
    optional string second_guarantor_phone_number = 25;
    optional string previous_place_of_work = 26;
    optional string previous_place_of_work_duration = 27;
    optional string bank_name = 28;
    optional string bank_code = 29;
    optional string account_number = 30;
    optional string account_name = 31;
    bytes selfie = 32;
    optional string selfie_base64 = 33;
    optional string device_token = 34;
    optional string device_version = 35;
}

message SaveSellerRequest {
    optional string country_id = 1;
    optional string state_id = 2;
    optional string city_id = 3;
    optional string lga_id = 4;
    optional string id = 5;
    // string username = 5; // commented out as in original
    string phone = 6;
    string email = 7;
    string password = 8;
    string latitude = 9;
    string longitude = 10;
    string category_id = 11;
    string business_name = 12;
    optional string firstname = 13;
    optional string othername = 14;
    optional string lastname = 15;
    optional string individual_full_name = 16;
    string individual_address = 17;
    bytes individual_selfie = 18;
    string individual_selfie_base64 = 19;
    bytes individual_identity_card = 20;
    string individual_identity_card_base64 = 21;
    string business_phone_number = 22;
    optional string business_email = 23;
    string license_number = 24;
    string opening_hours = 25;
    string closing_hours = 26;
    string business_street = 27;
    string business_house_number = 28;
    string business_nearest_bus_stop = 29;
    bytes business_logo = 30;
    string business_logo_base64 = 31;
    bytes business_thumbnail = 32;
    string business_thumbnail_base64 = 33;
    bytes business_certificate = 34;
    string business_certificate_base64 = 35;
    bytes business_memorandum = 36;
    string business_memorandum_base64 = 37;
    bytes business_utility_bill = 38;
    string business_utility_bill_base64 = 39;
    bytes business_building = 40;
    string business_building_base64 = 41;
    string device_token = 42;
    string device_version = 43;
}
message GetRequest {
    string id = 1;
}

message CreateCustomer {
    string firstName = 1;
    string lastName = 2;
    string email = 3;
    string phone = 4;
    string latitude = 5;
    string longitude = 6;
    string houseNumber = 7;
    string street = 8;
    string nearestBusStop = 9;
    string city = 10;
    string state = 11;
    string country = 12;
    string deviceToken = 13;
    string deviceVersion = 14;
    string referralCode = 15;
    string password = 16;
    optional string stateId = 17;
    optional string cityId = 18;
    optional string lgaId = 19;
    map<string, string> metadata = 20;
}
enum UserType {
    USER_TYPE_CUSTOMER = 1;
    USER_TYPE_RIDER = 2;
    USER_TYPE_VENDOR = 3;
    USER_TYPE_ADMIN = 4;
}
message LoginRequest {
    string username = 1;
    string password = 2;
    string device_version = 3;
    string device_token = 4;
    UserType user_type = 5;
}

message Rider {
    string id = 1;
    map<string, string> phones = 2;
    string firstname = 4;
    string lastname = 5;
    string latitude = 6;
    string longitude = 7;
    int32 contract_type = 8;
    repeated int32 shift_data = 9;
    optional string next_of_kin = 10;
    optional string next_of_kin_phone_number = 11;
    optional string drivers_license = 12;
    optional int32 vehicle_type = 13;
    optional string vehicle_brand = 14;
    optional string vehicle_plate_number = 15;
    optional string vehicle_picture_base64 = 16;
    optional string first_guarantor_name = 17;
    optional string first_guarantor_phone_number = 18;
    optional string second_guarantor_name = 19;
    optional string second_guarantor_phone_number = 20;
    optional string previous_place_of_work = 21;
    optional string previous_place_of_work_duration = 22;
    optional string bank_name = 23;
    optional string bank_code = 24;
    optional string account_number = 25;
    optional string account_name = 26;
    optional string selfie = 27;
}

message Seller {
    string id = 1;
    string status = 2;
    optional string plan = 3;
    optional int32 tier = 4;
    string email = 5;
    repeated string phones = 6;
    string user_id = 7;
    string latitude = 8;
    string longitude = 9;
    string category_id = 10;
    string business_name = 11;
    optional string individual_full_name = 15;
    string individual_address = 16;
    optional string individual_selfie = 17;
    optional string individual_identity_card = 18;
    optional string business_email = 20;
    string license_number = 21;
    string opening_hours = 22;
    string closing_hours = 23;
    optional string business_logo = 27;
    optional string business_thumbnail = 28;
    optional string business_certificate = 29;
    optional string business_memorandum = 30;
    optional string business_utility_bill = 31;
    optional string business_building = 32;
}

message Personnel {
    string id = 1;
    string firstname = 2;
    string lastname = 3;
    string othername = 4;
    string user_id = 5;
    string business_id = 6;
    string avatar = 7;
    string compliance = 8;
    string status = 9;
    string created_at = 10;
}
