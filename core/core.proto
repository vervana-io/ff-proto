syntax = "proto3";

package core;

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/any.proto";

// Messages for Category entity
message Category {
  string id = 1;
  string name = 2;
  string description = 3;
  string business_id = 4;
  optional string franchise_id = 5;
}

message SaveCategoryRequest {
  optional string id = 1; // Optional ID for update, absent for create
  string name = 2;
  string description = 3;
  string business_id = 4;
  optional string franchise_id = 5;
}

message ListResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  google.protobuf.ListValue data = 5;
  int32 next_page_token = 6;
}

// Messages for Product entity
message Product {
  string id = 1;
  string business_id = 2;
  optional string franchise_id = 3;
  optional string category_id = 4;
  optional string title = 5;
  optional string description = 6;
  int32 units = 7;
  double price = 8;
  double discount = 9;
  int32 prep_time = 10;
  optional string special_note = 11;
  int32 unit_low_level = 12;
  bool is_allergies = 13;
  optional string allergies = 14;
  int32 status = 15;
  optional string created_by = 16;
  optional string updated_by = 17;
  optional string love_reactant_id = 18;
  google.protobuf.Timestamp created_at = 19;
  google.protobuf.Timestamp updated_at = 20;
}

message SaveProductRequest {
  optional string id = 1; // Optional ID for update, absent for create
  string business_id = 2;
  optional string franchise_id = 3;
  optional string category_id = 4;
  optional string title = 5;
  optional string description = 6;
  int32 units = 7;
  double price = 8;
  double discount = 9;
  int32 prep_time = 10;
  optional string special_note = 11;
  int32 unit_low_level = 12;
  bool is_allergies = 13;
  optional string allergies = 14;
  int32 status = 15;
}
message ProductResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  Product data = 5;
}

message ProductListResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  repeated Product data = 5;
  int32 next_page_token = 6;
}

message Response {
  int32 status = 1;
  string message = 2;
  string error = 3;
  bool success = 4;
  map<string, string> data = 5;
}

message GetRequest {
  string id = 1;
  optional string user_id = 2;
}

// Messages for CouponBusiness entity
message CouponBusiness {
  string id = 1;
  string coupon_id = 2;
  string business_id = 3;
  int32 status = 4;
  google.protobuf.Timestamp created_at = 5;
  google.protobuf.Timestamp updated_at = 6;
}

// Messages for ProductAddon entity
message ProductAddon {
  string id = 1;
  string category_id = 2;
  optional string name = 3;
  double price = 4;
  int32 status = 5;
  google.protobuf.Timestamp created_at = 6;
  google.protobuf.Timestamp updated_at = 7;
}

message SaveProductAddonRequest {
  optional string id = 1; // Optional ID for update, absent for create
  string category_id = 2;
  optional string name = 3;
  double price = 4;
  int32 status = 5;
}

message GetProductAddonResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  ProductAddon product_addon = 5;
}

// Messages for GroupOrder entity
message GroupOrder {
  string id = 1;
  string customer_id = 2;
  string rider_id = 3;
  int32 order_type = 4;
  int32 payment_type = 5;
  optional string title = 6;
  optional string reference = 7;
  int32 total_person = 8;
  int32 used_access = 9;
  double total_amount = 10;
  double spending_limit = 11;
  optional string rejection_reason = 12;
  optional string cancellation_reason = 13;
  bool is_scheduled = 14;
  optional google.protobuf.Timestamp scheduled_at = 15;
  optional google.protobuf.Timestamp expired_at = 16;
}

message SaveGroupOrderRequest {
  optional string id = 1; // Optional ID for update, absent for create
  string customer_id = 2;
  string rider_id = 3;
  int32 order_type = 4;
  int32 payment_type = 5;
  optional string title = 6;
  optional string reference = 7;
  int32 total_person = 8;
  int32 used_access = 9;
  double total_amount = 10;
  double spending_limit = 11;
  optional string rejection_reason = 12;
  optional string cancellation_reason = 13;
  bool is_scheduled = 14;
  optional google.protobuf.Timestamp scheduled_at = 15;
  optional google.protobuf.Timestamp expired_at = 16;
}

message SaveGroupOrderResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  GroupOrder group_order = 5;
}

message GetGroupOrderResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  GroupOrder group_order = 5;
}

// Messages for OrderLog entity
message OrderLog {
  string id = 1;
  string order_id = 2;
  string admin_id = 3;
  string customer_id = 4;
  string seller_id = 5;
  string rider_id = 6;
  int32 event_type = 7;
  int32 status = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
}

// Messages for FoodClass entity
message FoodClass {
  string id = 1;
  optional string name = 2;
  optional string description = 3;
  optional int32 status = 4;
  optional string created_by = 5;
  optional string updated_by = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

message SaveFoodClassRequest {
  optional string id = 1; // Optional ID for update, absent for create
  optional string name = 2;
  optional string description = 3;
  optional int32 status = 4;
}

// Messages for OrderProduct entity
message OrderProduct {
  string id = 1;
  string order_id = 2;
  string product_id = 3;
  int32 quantity = 4;
  double price = 5;
  double discount = 6;
  optional string special_note = 7;
  int32 status = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
}

// Messages for Order entity
message Order {
  string id = 1;
  string business_id = 2;
  optional string franchise_id = 3;
  string customer_id = 4;
  optional string rider_id = 5;
  optional string coupon_id = 6;
  int32 order_type = 7;
  int32 payment_type = 8;
  optional string title = 9;
  optional string reference = 10;
  double total_amount = 11;
  optional string rejection_reason = 12;
  optional string cancellation_reason = 13;
  bool is_scheduled = 14;
  optional google.protobuf.Timestamp scheduled_at = 15;
  optional google.protobuf.Timestamp expired_at = 16;
  int32 status = 17;
  optional string created_by = 18;
  optional string updated_by = 19;
  google.protobuf.Timestamp created_at = 20;
  google.protobuf.Timestamp updated_at = 21;
}
message Location {
  float latitude = 1;
  float longitude = 2;
  string formatted = 3;
  optional string address_id = 4;
}
message SaveOrderRequest {
  optional string id = 1; // Optional ID for update, absent for create
  optional string business_id = 2;
  optional string franchise_id = 3;
  string customer_id = 4;
  optional string rider_id = 5;
  optional string coupon_id = 6;
  int32 order_type = 7;
  int32 payment_type = 8;
  optional string title = 9;
  optional string reference = 10;
  double total_amount = 11;
  optional string rejection_reason = 12;
  optional string cancellation_reason = 13;
  bool is_scheduled = 14;
  optional google.protobuf.Timestamp scheduled_at = 15;
  optional google.protobuf.Timestamp expired_at = 16;
  int32 status = 17;
  Location delivery_location = 18;
  repeated Product products = 19;
  map<string, string> metadata = 20;
  message Product {
    string id = 1;
    int32 quantity = 2;
    double amount = 3;
     repeated string addons = 4;
  }
}

// Messages for Transaction entity
message Transaction {
  string id = 1;
  string order_id = 2;
  string payment_method_id = 3;
  string user_id = 4;
  double amount = 5;
  string currency = 6;
  string transaction_id = 7;
  string status = 8;
  optional string description = 9;
  google.protobuf.Timestamp transaction_date = 10;
  optional string created_by = 11;
  optional string updated_by = 12;
  google.protobuf.Timestamp created_at = 13;
  google.protobuf.Timestamp updated_at = 14;
}

message SaveTransactionRequest {
  optional string id = 1;
  string order_id = 2;
  string payment_method_id = 3;
  string user_id = 4;
  double amount = 5;
  string currency = 6;
  string transaction_id = 7;
  string status = 8;
  optional string description = 9;
  google.protobuf.Timestamp transaction_date = 10;
}

// Messages for Refund entity
message Refund {
  string id = 1;
  string transaction_id = 2;
  double amount = 3;
  string currency = 4;
  string status = 5;
  optional string reason = 6;
  google.protobuf.Timestamp refund_date = 7;
  optional string created_by = 8;
  optional string updated_by = 9;
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

message SaveRefundRequest {
  optional string id = 1;
  string transaction_id = 2;
  double amount = 3;
  string currency = 4;
  string status = 5;
  optional string reason = 6;
  google.protobuf.Timestamp refund_date = 7;
}


// Messages for Tag entity
message Tag {
  string id = 1;
  string name = 2;
  optional string description = 3;
  int32 status = 4;
  optional string created_by = 5;
  optional string updated_by = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

// Messages for RiderOrder entity
message RiderOrder {
  string id = 1;
  string rider_id = 2;
  string order_id = 3;
  int32 status = 4;
  optional string cancellation_reason = 5;
  optional string rejection_reason = 6;
  google.protobuf.Timestamp accepted_at = 7;
  google.protobuf.Timestamp picked_up_at = 8;
  google.protobuf.Timestamp delivered_at = 9;
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

// Messages for Rating entity
message Rating {
  string id = 1;
  optional string order_id = 2;
  optional string product_id = 3;
  string user_id = 4;
  int32 rating_value = 5;
  optional string comment = 6;
  google.protobuf.Timestamp rating_date = 7;
  optional string created_by = 8;
  optional string updated_by = 9;
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

message SaveRatingRequest {
  optional string id = 1;
  optional string order_id = 2;
  optional string product_id = 3;
  string user_id = 4;
  int32 rating_value = 5;
  optional string comment = 6;
  google.protobuf.Timestamp rating_date = 7;
}

// Messages for CouponRedemption entity
message CouponRedemption {
  string id = 1;
  string coupon_id = 2;
  string user_id = 3;
  google.protobuf.Timestamp redemption_date = 4;
  int32 status = 5;
  optional string created_by = 6;
  optional string updated_by = 7;
  google.protobuf.Timestamp created_at = 8;
  google.protobuf.Timestamp updated_at = 9;
}


// Messages for Coupon entity
message Coupon {
  string id = 1;
  string code = 2;
  optional string description = 3;
  int32 discount_type = 4;
  double discount_value = 5;
  google.protobuf.Timestamp valid_from = 6;
  google.protobuf.Timestamp valid_to = 7;
  int32 usage_limit = 8;
  int32 used_count = 9;
  int32 status = 10;
  optional string created_by = 11;
  optional string updated_by = 12;
  google.protobuf.Timestamp created_at = 13;
  google.protobuf.Timestamp updated_at = 14;
}

message SaveCouponRequest {
  optional string id = 1; // Optional ID for update, absent for create
  string code = 2;
  optional string description = 3;
  int32 discount_type = 4;
  double discount_value = 5;
  google.protobuf.Timestamp valid_from = 6;
  google.protobuf.Timestamp valid_to = 7;
  int32 usage_limit = 8;
  int32 used_count = 9;
  int32 status = 10;
}

message GetCouponResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  Coupon coupon = 5;
}

// Messages for Configuration entity
message Configuration {
  string id = 1;
  string business_id = 2;
  optional string franchise_id = 3;
  optional string key = 4;
  optional string value = 5;
  optional string description = 6;
  int32 status = 7;
  optional string created_by = 8;
  optional string updated_by = 9;
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

message SaveConfigurationRequest {
  optional string id = 1;
  string business_id = 2;
  optional string franchise_id = 3;
  optional string key = 4;
  optional string value = 5;
  optional string description = 6;
  int32 status = 7;
}

message SaveConfigurationResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  Configuration configuration = 5;
}

message GetConfigurationResponse {
  int32 status = 1;
  string message = 2;
  optional string error = 3;
  bool success = 4;
  Configuration configuration = 5;
}

message GetListRequest {
  string query = 1;
  map<string, string > filters = 2;
  int32 page = 3;
  int32 size = 4;
  optional string user_id = 5;
}

message ProductReviewRequest {
  string user_id = 1;
  string product_id = 2;
  float rate = 3;
  string message = 4;
  map<string,string> metadata = 5;
}

message FavoriteProductRequest {
  string id = 1;
  string user_id = 2;
  optional string customer_id = 3;
}

message SaveProductAddon {
  string category_id = 1;
  string name = 2;
  int32 price = 3;
  string id = 4;
  message AddonCategory {
    string product_id = 1;
    string name = 2;
    string description = 3;
    bool required = 4;
    optional string id = 5;
  }
}
message Empty {}
message SellerOrderRequest {
  string order_id = 1;
  string seller_id = 2;
  string type = 3;
  repeated OrderProductReq order_products = 4;
  message OrderProductReq {
    string id =1;
    repeated string addons = 2;
  }
}
message RiderOrderRequest {
  string order_id = 1;
  string request_id = 2;
  string rider_id = 3;
  repeated string media = 4;
  optional Place place = 5;
  enum Place {
    PLACE_SELLER = 1;
    PLACE_CUSTOMER = 2;
  }
}
message DelayOrderRequest {
  string id = 1;
  int64 minutes = 2;
  string seller_id = 3;
}
message CancelOrderRequest {
  string order_id = 1;
  string reason = 2;
  By cancel_by =3;

  enum By {
    BY_CUSTOMER = 1;
    BY_SELLER = 2;
    BY_ADMIN = 3;
  }
}
message IdRequest {
  string id = 1;
  optional string user_id = 2;
}
service CoreService {
  rpc SaveCategory (SaveCategoryRequest) returns (Response);
  rpc GetCategory (GetRequest) returns (Response);
  rpc DeleteCategory (GetRequest) returns (Response);
  rpc GetCategories (GetListRequest) returns (Response);

  rpc SaveProduct (SaveProductRequest) returns (Response);
  rpc GetProduct (GetRequest) returns (ProductResponse);
  rpc DeleteProduct (GetRequest) returns (Response);
  rpc GetProducts (GetListRequest) returns (ProductListResponse);
  rpc GetProductRecommendation(GetListRequest) returns (ProductListResponse);
  rpc AddProductReview(ProductReviewRequest) returns (Response);
  rpc FavoriteProduct(FavoriteProductRequest) returns (Response);

  rpc SaveGroupOrder (SaveGroupOrderRequest) returns (SaveGroupOrderResponse);
  rpc GetGroupOrder (GetRequest) returns (GetGroupOrderResponse);
  rpc DeleteGroupOrder (GetRequest) returns (Response);

  rpc SaveFoodClass (SaveFoodClassRequest) returns (Response);
  rpc GetFoodClass (GetRequest) returns (Response);
  rpc DeleteFoodClass (GetRequest) returns (Response);

  rpc SaveOrder (SaveOrderRequest) returns (Response);
  rpc GetOrder (GetRequest) returns (Response);
  rpc SellerVerifyOrder(SellerOrderRequest) returns (Response);
  rpc CustomerVerifyOrder(IdRequest) returns (Response);
  rpc RiderAcceptOrder(RiderOrderRequest) returns (Response);
  rpc RiderRejectOrder(RiderOrderRequest) returns (Response);
  rpc RiderArrive(RiderOrderRequest) returns (Response);
  rpc RiderPickup(RiderOrderRequest) returns (Response);
  rpc ApproveOrder(SellerOrderRequest) returns (Response);
  rpc OrderReady(SellerOrderRequest) returns (Response);
  rpc DelayOrder(DelayOrderRequest) returns (Response);
  rpc CancelOrder(CancelOrderRequest) returns (Response);
  rpc OrderNotifyRiders(SellerOrderRequest) returns (Response);
  rpc OrderDelivered(IdRequest) returns (Response);
  rpc CalculateDeliveryFee(IdRequest) returns (Response);
  rpc DeleteOrder (IdRequest) returns (Response);

  rpc SaveTransaction (SaveTransactionRequest) returns (Response);
  rpc GetTransaction (GetRequest) returns (Response);
  rpc DeleteTransaction (GetRequest) returns (Response);

  rpc SaveRefund (SaveRefundRequest) returns (Response);
  rpc GetRefund (GetRequest) returns (Response);
  rpc DeleteRefund (GetRequest) returns (Response);

  rpc SaveConfiguration (SaveConfigurationRequest) returns (SaveConfigurationResponse);
  rpc GetConfiguration (GetRequest) returns (GetConfigurationResponse);
  rpc DeleteConfiguration (GetRequest) returns (Response);
}